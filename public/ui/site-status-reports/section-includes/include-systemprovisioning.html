<div ng-if="vm.permissions.create.Cucmclass">

	<div class="panel panel-default" style="box-shadow: 1px 1px 5px grey;">
		<div class="panel-heading" role="tab" id="siteprovision" style="background-color: #aeb3b7; background-image: linear-gradient(#e4e6e7, #d6d9db 60%, #c9cccf)">

			<a class="collapsed" data-toggle="collapse" data-parent="#accordion" ng-href="" data-target="#collapse_provision" style="color:black;cursor: pointer;" aria-expanded="false" aria-controls="collapse_provision">
				<h4><b><i class="fa fa-server"></i> Site Objects <i class="fa fa-caret-down"></i></b></h4>
			</a>
		</div>
		<div class="panel-body panel-collapse collapse collapse in" role="tabpanel" id="collapse_provision"  aria-labelledby="siteprovision">
				<legend> 
					Site: {{vm.sitecode}} 	
					<div style="margin:10px"></div>					
					<a href="#/sitestatusreports/{{vm.sitecode}}/config" ng-if="vm.permissions.read.Cucmsiteconfigs"><button class="btn btn-primary btn-sm" ><b> <i class="fa fa-history"></i> Config Repo</b></button> </a>
					<div style="margin:10px"></div>
				</legend>
				

				<div style="margin:25px"></div>
				

				<div class="panel panel-default" ng-show="vm.cucmsite.summary">
					<div class="panel-heading">
						<a class="collapsed" data-toggle="collapse" ng-href="" data-target="#collapse1" style="color:black;cursor: pointer;"><h4><i class="fa fa-check-square-o"></i> CUCM - Site Configuration</h4></a>
					</div>
					<div class="panel-body panel-collapse collapse"" id="collapse1">
						
						<p><b style="color:red">Note!</b> Hunt Pilots, CTI Route Points, etc... Do not show up in Site Summary</p>
						
						<div class="table-responsive">
						<table class="table table-bordered table-hover table-responsive">
							<tbody>
								
								<tr ng-repeat="(key,values) in vm.cucmsite.summary track by $index">
									<td><b>{{key}}</b></td>
									<!--<td style="word-wrap: break-word; margin:10px;">{{values}}</td>-->
									<td>
										<table class="table table-bordered table-hover table-responsive" style="background-color: transparent;">
											
											<!-- Must add the directive name to the ng-repeat to get popovers to work. -->
											
											<tr ng-repeat="value in values">
												<td>
													<div ng-repeat="(objkey,objvalue) in vm.cucmsite.details" >
														<!--Watch the ng-if-->
													
														<div ng-if="objkey == value" pop-over>
															<!-- This links to the sitepopover.html directive template-->
														</div>

													</div>
												</td>
											</tr>	
										</table>
									</td>
								</tr>
								
							</tbody>
							
						</table>
						</div>
					</div>	
					<!--<script type="text/ng-template" id="popover_template.html">
						crap
					</script>-->
				</div>
				

				<div ng-if="vm.siteusertemplates.length > 0">
				
					<div class="panel panel-default" ng-show="vm.siteusertemplates">
						<div class="panel-heading">
							<a class="collapsed" data-toggle="collapse" ng-href="" data-target="#usertemplates" style="color:black;cursor: pointer;"><h4><i class="fa fa-check-square-o"></i> Unity Connection - User Templates</h4></a>
						</div>
						<div class="panel-body panel-collapse collapse" id="usertemplates">
							<div class="panel panel-default" style="box-shadow: 1px 1px 5px grey;">
							<div class="table-responsive">
								<table class="table table-condensed table-striped table-bordered table-hover">
									<thead>
										<tr class="success">
												<th>Alias</th>
												<th>TimeZone</th>
												<th>Language</th>
												<th>External Service Account</th>
												<th>Menu Options</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="template in vm.siteusertemplates">
											<td><b>{{template.Alias}}</b></td>
											<td>{{template.TimeZone}}</td>
											<td>{{template.Language}}</td>
											<td>{{template.externalserviceaccounts.return.response.TemplateExternalServiceAccount.DisplayName}}</td>
											<td>
												<table class="table table-condensed table-striped table-bordered table-hover">
													<tr ng-if="template.callerinput.response.MenuEntry" ng-repeat="menuoption in template.callerinput.response.MenuEntry">
														<td>{{menuoption.TouchtoneKey}}</td>
														<td>{{menuoption.DisplayName}}</td>
														<td>{{menuoption.TransferNumber}}</td>
														<td>{{menuoption.TransferRings}}</td>
														<td>{{menuoption}}</td>
													</tr>
												</table>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>	
			</div>
			
		</div>
	</div>	
</div>